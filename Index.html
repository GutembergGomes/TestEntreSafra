<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de Manutenção - ENTRESSAFRA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#f8fafc'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
    <!-- Header -->
    <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-semibold text-gray-900 dark:text-white">
                        Sistema de Controle de Manutenção - ENTRESSAFRA
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-500 dark:text-gray-400" id="currentDate"></span>
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">
                        Elenildo Pereira de Souza - Coordenador de Produção
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8 overflow-x-auto">
                <button onclick="showSection('dashboard')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-primary border-b-2 border-primary">
                    Dashboard
                </button>
                <button onclick="showSection('carretas')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-b-2 border-transparent">
                    Limpeza Carretas
                </button>
                <button onclick="showSection('colhedoras')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-b-2 border-transparent">
                    Colhedoras
                </button>
                <button onclick="showSection('tratores')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-b-2 border-transparent">
                    Tratores
                </button>
                <button onclick="showSection('transbordos')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-b-2 border-transparent">
                    Transbordos
                </button>
                <button onclick="showSection('caminhoes')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-b-2 border-transparent">
                    Caminhões
                </button>
                <button onclick="showSection('vivencias')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-b-2 border-transparent">
                    Vivências
                </button>
                <button onclick="showSection('reboques')" class="nav-btn whitespace-nowrap py-4 px-1 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 border-b-2 border-transparent">
                    Reboques Sojas
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Dashboard Geral</h2>
                
                <!-- Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-md flex items-center justify-center">
                                    <div class="w-4 h-4 bg-green-600 rounded-full"></div>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Concluídos</p>
                                <p class="text-2xl font-semibold text-gray-900 dark:text-white" id="totalCompleted">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-md flex items-center justify-center">
                                    <div class="w-4 h-4 bg-yellow-600 rounded-full"></div>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Em Andamento</p>
                                <p class="text-2xl font-semibold text-gray-900 dark:text-white" id="totalInProgress">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-red-100 dark:bg-red-900 rounded-md flex items-center justify-center">
                                    <div class="w-4 h-4 bg-red-600 rounded-full"></div>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Pendente</p>
                                <p class="text-2xl font-semibold text-gray-900 dark:text-white" id="totalPending">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-md flex items-center justify-center">
                                    <div class="w-4 h-4 bg-blue-600 rounded-full"></div>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Itens</p>
                                <p class="text-2xl font-semibold text-gray-900 dark:text-white" id="totalItems">0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category Progress -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Progresso por Categoria</h3>
                        <div id="categoryProgress" class="space-y-4">
                            <!-- Progress bars will be generated here -->
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Itens Críticos</h3>
                        <div id="criticalItems" class="space-y-3">
                            <!-- Critical items will be listed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carretas Section -->
        <div id="carretas" class="section hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Limpeza de Carretas</h2>
                    <button onclick="addNewEquipment('carretas')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                        <span class="mr-2">+</span> Adicionar Carreta
                    </button>
                </div>
                <div class="flex flex-wrap gap-4 mb-4">
                    <button onclick="filterItems('carretas', 'all')" class="filter-btn bg-primary text-white px-4 py-2 rounded-md text-sm font-medium">
                        Todos
                    </button>
                    <button onclick="filterItems('carretas', 'REALIZADO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">
                        Realizado
                    </button>
                    <button onclick="filterItems('carretas', 'EM ANDAMENTO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">
                        Em Andamento
                    </button>
                    <button onclick="filterItems('carretas', 'PENDENTE')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">
                        Pendente
                    </button>
                </div>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                        <thead class="bg-gray-50 dark:bg-gray-700">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Conjunto</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Limpeza Seco</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Limpeza Pipa</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="carretasTable" class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                            <!-- Table content will be generated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Other sections will be similar, but I'll create a generic section template -->
        <div id="colhedoras" class="section hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Reforma de Colhedoras</h2>
                    <button onclick="addNewEquipment('colhedoras')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                        <span class="mr-2">+</span> Adicionar Colhedora
                    </button>
                </div>
                <div class="flex flex-wrap gap-4 mb-4">
                    <button onclick="filterItems('colhedoras', 'all')" class="filter-btn bg-primary text-white px-4 py-2 rounded-md text-sm font-medium">Todos</button>
                    <button onclick="filterItems('colhedoras', 'FEITO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Feito</button>
                    <button onclick="filterItems('colhedoras', 'EM ANDAMENTO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Em Andamento</button>
                    <button onclick="filterItems('colhedoras', 'PENDENTE')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Pendente</button>
                </div>
            </div>
            <div class="equipment-grid" id="colhedorasGrid"></div>
        </div>

        <div id="tratores" class="section hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Reforma de Tratores</h2>
                    <button onclick="addNewEquipment('tratores')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                        <span class="mr-2">+</span> Adicionar Trator
                    </button>
                </div>
                <div class="flex flex-wrap gap-4 mb-4">
                    <button onclick="filterItems('tratores', 'all')" class="filter-btn bg-primary text-white px-4 py-2 rounded-md text-sm font-medium">Todos</button>
                    <button onclick="filterItems('tratores', 'FEITO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Feito</button>
                    <button onclick="filterItems('tratores', 'EM ANDAMENTO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Em Andamento</button>
                    <button onclick="filterItems('tratores', 'PENDENTE')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Pendente</button>
                </div>
            </div>
            <div class="equipment-grid" id="tratoresGrid"></div>
        </div>

        <div id="transbordos" class="section hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Reforma de Transbordos</h2>
                    <button onclick="addNewEquipment('transbordos')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                        <span class="mr-2">+</span> Adicionar Transbordo
                    </button>
                </div>
                <div class="flex flex-wrap gap-4 mb-4">
                    <button onclick="filterItems('transbordos', 'all')" class="filter-btn bg-primary text-white px-4 py-2 rounded-md text-sm font-medium">Todos</button>
                    <button onclick="filterItems('transbordos', 'FEITO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Feito</button>
                    <button onclick="filterItems('transbordos', 'EM ANDAMENTO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Em Andamento</button>
                    <button onclick="filterItems('transbordos', 'PENDENTE')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Pendente</button>
                </div>
            </div>
            <div class="equipment-grid" id="transbordosGrid"></div>
        </div>

        <div id="caminhoes" class="section hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Reforma de Caminhões</h2>
                    <button onclick="addNewEquipment('caminhoes')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                        <span class="mr-2">+</span> Adicionar Caminhão
                    </button>
                </div>
                <div class="flex flex-wrap gap-4 mb-4">
                    <button onclick="filterItems('caminhoes', 'all')" class="filter-btn bg-primary text-white px-4 py-2 rounded-md text-sm font-medium">Todos</button>
                    <button onclick="filterItems('caminhoes', 'FEITO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Feito</button>
                    <button onclick="filterItems('caminhoes', 'EM ANDAMENTO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Em Andamento</button>
                    <button onclick="filterItems('caminhoes', 'PENDENTE')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Pendente</button>
                </div>
            </div>
            <div class="equipment-grid" id="caminhoesGrid"></div>
        </div>

        <div id="vivencias" class="section hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Reforma de Vivências</h2>
                    <button onclick="addNewEquipment('vivencias')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                        <span class="mr-2">+</span> Adicionar Vivência
                    </button>
                </div>
                <div class="flex flex-wrap gap-4 mb-4">
                    <button onclick="filterItems('vivencias', 'all')" class="filter-btn bg-primary text-white px-4 py-2 rounded-md text-sm font-medium">Todos</button>
                    <button onclick="filterItems('vivencias', 'FEITO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Feito</button>
                    <button onclick="filterItems('vivencias', 'EM ANDAMENTO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Em Andamento</button>
                    <button onclick="filterItems('vivencias', 'PENDENTE')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Pendente</button>
                </div>
            </div>
            <div class="equipment-grid" id="vivenciasGrid"></div>
        </div>

        <div id="reboques" class="section hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Reboques Sojas</h2>
                    <button onclick="addNewEquipment('reboques')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                        <span class="mr-2">+</span> Adicionar Reboque
                    </button>
                </div>
                <div class="flex flex-wrap gap-4 mb-4">
                    <button onclick="filterItems('reboques', 'all')" class="filter-btn bg-primary text-white px-4 py-2 rounded-md text-sm font-medium">Todos</button>
                    <button onclick="filterItems('reboques', 'FEITO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Feito</button>
                    <button onclick="filterItems('reboques', 'EM ANDAMENTO')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Em Andamento</button>
                    <button onclick="filterItems('reboques', 'PENDENTE')" class="filter-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-md text-sm font-medium">Pendente</button>
                </div>
            </div>
            <div class="equipment-grid" id="reboquesGrid"></div>
        </div>
    </main>

    <!-- Modal for editing status -->
    <div id="editModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Editar Status</h3>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Equipamento:</label>
                    <p id="editEquipmentName" class="text-sm text-gray-600 dark:text-gray-400"></p>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Status:</label>
                    <select id="editStatus" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-base">
                        <option value="PENDENTE">Pendente</option>
                        <option value="EM ANDAMENTO">Em Andamento</option>
                        <option value="REALIZADO">Realizado</option>
                        <option value="FEITO">Feito</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-3">
                    <button onclick="closeEditModal()" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded">
                        Cancelar
                    </button>
                    <button onclick="saveEdit()" class="px-4 py-2 bg-primary text-white hover:bg-primary/90 rounded">
                        Salvar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for adding new equipment -->
    <div id="addModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Adicionar Novo Equipamento</h3>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Tipo:</label>
                    <p id="addEquipmentType" class="text-sm text-gray-600 dark:text-gray-400"></p>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">ID/Número:</label>
                    <input type="text" id="addEquipmentId" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-base" placeholder="Digite o ID do equipamento">
                </div>

                <div class="mb-4" id="addPlacaField" style="display: none;">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Placa:</label>
                    <input type="text" id="addEquipmentPlaca" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-base" placeholder="Digite a placa">
                </div>

                <div class="mb-4" id="addLocalField" style="display: none;">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Local:</label>
                    <input type="text" id="addEquipmentLocal" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-base" placeholder="Digite o local">
                </div>

                <div class="mb-4" id="addPendenciasField" style="display: none;">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Pendências:</label>
                    <textarea id="addEquipmentPendencias" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-base" rows="3" placeholder="Digite as pendências"></textarea>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Status Inicial:</label>
                    <select id="addEquipmentStatus" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-base">
                        <option value="PENDENTE">Pendente</option>
                        <option value="EM ANDAMENTO">Em Andamento</option>
                        <option value="REALIZADO">Realizado</option>
                        <option value="FEITO">Feito</option>
                    </select>
                </div>

                <div class="flex justify-end space-x-3">
                    <button onclick="closeAddModal()" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded">
                        Cancelar
                    </button>
                    <button onclick="saveNewEquipment()" class="px-4 py-2 bg-green-600 text-white hover:bg-green-700 rounded">
                        Adicionar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for confirming deletion -->
    <div id="deleteModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Confirmar Exclusão</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Tem certeza que deseja excluir este equipamento?</p>
                <p id="deleteEquipmentName" class="text-sm font-medium text-gray-900 dark:text-white mb-4"></p>
                <div class="flex justify-end space-x-3">
                    <button onclick="closeDeleteModal()" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded">
                        Cancelar
                    </button>
                    <button onclick="confirmDelete()" class="px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded">
                        Excluir
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .equipment-card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            transition: all 0.2s;
        }

        .equipment-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .dark .equipment-card {
            background: #1f2937;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-realizado, .status-feito {
            background-color: #dcfce7;
            color: #166534;
        }

        .dark .status-realizado, .dark .status-feito {
            background-color: #14532d;
            color: #bbf7d0;
        }

        .status-em-andamento {
            background-color: #fef3c7;
            color: #92400e;
        }

        .dark .status-em-andamento {
            background-color: #92400e;
            color: #fef3c7;
        }

        .status-pendente {
            background-color: #fee2e2;
            color: #991b1b;
        }

        .dark .status-pendente {
            background-color: #991b1b;
            color: #fecaca;
        }

        .progress-bar {
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
            height: 0.5rem;
        }

        .dark .progress-bar {
            background-color: #374151;
        }

        .progress-fill {
            height: 100%;
            background-color: #10b981;
            transition: width 0.3s ease;
        }
    </style>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Data structure based on the Excel file
        const maintenanceData = {
            carretas: [
                { id: '6398-6403', limpezaSeco: 'REALIZADO', limpezaPipa: 'REALIZADO' },
                { id: '6431-6391', limpezaSeco: 'REALIZADO', limpezaPipa: 'REALIZADO' },
                { id: '4373-6198', limpezaSeco: 'REALIZADO', limpezaPipa: 'REALIZADO' },
                { id: '6218-6207', limpezaSeco: 'REALIZADO', limpezaPipa: 'REALIZADO' },
                { id: '6199-9546', limpezaSeco: 'REALIZADO', limpezaPipa: 'REALIZADO' },
                { id: '6388-6426', limpezaSeco: 'REALIZADO', limpezaPipa: 'REALIZADO' },
                { id: '6404-6397', limpezaSeco: 'EM ANDAMENTO', limpezaPipa: 'EM ANDAMENTO' },
                { id: '6394-6399', limpezaSeco: 'PENDENTE', limpezaPipa: 'PENDENTE' },
                { id: '4648-6430', limpezaSeco: 'PENDENTE', limpezaPipa: 'PENDENTE' },
                { id: '4653-6422', limpezaSeco: 'PENDENTE', limpezaPipa: 'PENDENTE' }
            ],
            colhedoras: [
                { id: '50159', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '5911', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6602', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6603', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6604', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6701', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6702', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6703', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6704', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6721', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6722', status: 'EM ANDAMENTO', local: '', pendencias: '' }
            ],
            tratores: [
                { id: '632', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '50163', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '50165', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6522', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6525', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6526', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6527', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6528', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6611', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6612', status: 'EM ANDAMENTO', local: '', pendencias: '' }
            ],
            transbordos: [
                { id: '176', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '481', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '532', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '562', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '689', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '918', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '3135', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '3138', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '3293', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '3294', status: 'EM ANDAMENTO', local: '', pendencias: '' }
            ],
            caminhoes: [
                { id: '4786', status: 'FEITO', local: 'PATIO AGRICOLA', pendencias: 'SEM PENDENCIAS', placa: 'QTR-5685' },
                { id: '4787', status: 'EM ANDAMENTO', local: 'OFICINA', pendencias: '', placa: 'QTR-5835' },
                { id: '6143', status: 'PENDENTE', local: 'OFICINA', pendencias: '', placa: 'OMS-7B91' },
                { id: '6138', status: 'PENDENTE', local: 'OFICINA', pendencias: '', placa: 'OMS-6831' },
                { id: '6145', status: 'PENDENTE', local: 'OFICINA', pendencias: '', placa: 'OMS-7F61' },
                { id: '6679', status: 'PENDENTE', local: 'OFICINA', pendencias: 'PARABRISA QUEBRADO', placa: 'SBY-6F31' },
                { id: '6680', status: 'FEITO', local: 'PATIO AGRICOLA', pendencias: 'SEM PENDENCIAS', placa: 'SBY-6E71' },
                { id: '6681', status: 'EM ANDAMENTO', local: 'OFICINA', pendencias: 'AG,Check List', placa: 'SBZ-0G11' },
                { id: '6682', status: 'EM ANDAMENTO', local: 'OFICINA', pendencias: 'Andamento de arla', placa: 'SBZ-6E21' },
                { id: '6697', status: 'FEITO', local: 'PATIO AGRICOLA', pendencias: 'SEM PENDENCIAS', placa: 'SDC-3G22' }
            ],
            vivencias: [
                { id: '6338', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6339', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6348', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6349', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6350', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6351', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6449', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6577', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6578', status: 'EM ANDAMENTO', local: '', pendencias: '' },
                { id: '6600', status: 'EM ANDAMENTO', local: '', pendencias: '' }
            ],
            reboques: [
                { id: 'RS-001', status: 'FEITO', local: 'PÁTIO SOJAS', pendencias: 'SEM PENDENCIAS', placa: 'RBS-1001' },
                { id: 'RS-002', status: 'EM ANDAMENTO', local: 'OFICINA', pendencias: 'Revisão sistema hidráulico', placa: 'RBS-1002' },
                { id: 'RS-003', status: 'PENDENTE', local: 'CAMPO', pendencias: 'Aguardando peças', placa: 'RBS-1003' },
                { id: 'RS-004', status: 'FEITO', local: 'PÁTIO SOJAS', pendencias: 'SEM PENDENCIAS', placa: 'RBS-1004' },
                { id: 'RS-005', status: 'EM ANDAMENTO', local: 'OFICINA', pendencias: 'Troca de lonas', placa: 'RBS-1005' },
                { id: 'RS-006', status: 'PENDENTE', local: 'CAMPO', pendencias: 'Problema na bascula', placa: 'RBS-1006' },
                { id: 'RS-007', status: 'FEITO', local: 'PÁTIO SOJAS', pendencias: 'SEM PENDENCIAS', placa: 'RBS-1007' },
                { id: 'RS-008', status: 'EM ANDAMENTO', local: 'OFICINA', pendencias: 'Calibração sensores', placa: 'RBS-1008' },
                { id: 'RS-009', status: 'PENDENTE', local: 'CAMPO', pendencias: 'Manutenção preventiva', placa: 'RBS-1009' },
                { id: 'RS-010', status: 'FEITO', local: 'PÁTIO SOJAS', pendencias: 'SEM PENDENCIAS', placa: 'RBS-1010' }
            ]
        };

        let currentEditItem = null;
        let currentEditCategory = null;
        let currentEditField = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            renderDashboard();
            renderAllSections();
        });

        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('pt-BR', options);
        }

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });

            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');

            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-primary', 'border-primary');
                btn.classList.add('text-gray-500', 'dark:text-gray-400', 'border-transparent');
            });

            event.target.classList.remove('text-gray-500', 'dark:text-gray-400', 'border-transparent');
            event.target.classList.add('text-primary', 'border-primary');
        }

        function renderDashboard() {
            let totalCompleted = 0;
            let totalInProgress = 0;
            let totalPending = 0;
            let totalItems = 0;

            const categoryStats = {};

            // Calculate statistics
            Object.keys(maintenanceData).forEach(category => {
                categoryStats[category] = { completed: 0, inProgress: 0, pending: 0, total: 0 };
                
                maintenanceData[category].forEach(item => {
                    totalItems++;
                    categoryStats[category].total++;

                    let status = '';
                    if (category === 'carretas') {
                        status = (item.limpezaSeco === 'REALIZADO' && item.limpezaPipa === 'REALIZADO') ? 'REALIZADO' :
                                (item.limpezaSeco === 'EM ANDAMENTO' || item.limpezaPipa === 'EM ANDAMENTO') ? 'EM ANDAMENTO' : 'PENDENTE';
                    } else {
                        status = item.status;
                    }

                    if (status === 'REALIZADO' || status === 'FEITO') {
                        totalCompleted++;
                        categoryStats[category].completed++;
                    } else if (status === 'EM ANDAMENTO') {
                        totalInProgress++;
                        categoryStats[category].inProgress++;
                    } else {
                        totalPending++;
                        categoryStats[category].pending++;
                    }
                });
            });

            // Update summary cards
            document.getElementById('totalCompleted').textContent = totalCompleted;
            document.getElementById('totalInProgress').textContent = totalInProgress;
            document.getElementById('totalPending').textContent = totalPending;
            document.getElementById('totalItems').textContent = totalItems;

            // Render category progress
            const categoryProgress = document.getElementById('categoryProgress');
            categoryProgress.innerHTML = '';

            Object.keys(categoryStats).forEach(category => {
                const stats = categoryStats[category];
                const completionRate = stats.total > 0 ? Math.round((stats.completed / stats.total) * 100) : 0;

                const categoryElement = document.createElement('div');
                categoryElement.innerHTML = `
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300 capitalize">${category}</span>
                        <span class="text-sm text-gray-500 dark:text-gray-400">${completionRate}%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${completionRate}%"></div>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">
                        <span>${stats.completed} concluídos</span>
                        <span>${stats.total} total</span>
                    </div>
                `;
                categoryProgress.appendChild(categoryElement);
            });

            // Render critical items (items with pendencies)
            const criticalItems = document.getElementById('criticalItems');
            criticalItems.innerHTML = '';

            const criticalList = [];
            
            maintenanceData.caminhoes.forEach(item => {
                if (item.pendencias && item.pendencias !== 'SEM PENDENCIAS' && item.pendencias !== '') {
                    criticalList.push({ category: 'Caminhões', id: item.id, issue: item.pendencias });
                }
            });

            if (criticalList.length === 0) {
                criticalItems.innerHTML = '<p class="text-sm text-gray-500 dark:text-gray-400">Nenhum item crítico no momento.</p>';
            } else {
                criticalList.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg';
                    itemElement.innerHTML = `
                        <div>
                            <p class="text-sm font-medium text-red-800 dark:text-red-200">${item.category} - ${item.id}</p>
                            <p class="text-xs text-red-600 dark:text-red-300">${item.issue}</p>
                        </div>
                        <span class="status-badge status-pendente">Crítico</span>
                    `;
                    criticalItems.appendChild(itemElement);
                });
            }
        }

        function renderAllSections() {
            renderCarretas();
            renderEquipmentSection('colhedoras');
            renderEquipmentSection('tratores');
            renderEquipmentSection('transbordos');
            renderEquipmentSection('caminhoes');
            renderEquipmentSection('vivencias');
            renderEquipmentSection('reboques');
        }

        function renderCarretas() {
            const tableBody = document.getElementById('carretasTable');
            tableBody.innerHTML = '';

            maintenanceData.carretas.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'carreta-row';
                row.setAttribute('data-status-seco', item.limpezaSeco);
                row.setAttribute('data-status-pipa', item.limpezaPipa);
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">${item.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="status-badge status-${item.limpezaSeco.toLowerCase().replace(' ', '-')}">${item.limpezaSeco}</span>
                        <button onclick="editStatus('carretas', '${item.id}', 'limpezaSeco')" class="ml-2 text-xs text-blue-600 dark:text-blue-400 hover:underline">Editar</button>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="status-badge status-${item.limpezaPipa.toLowerCase().replace(' ', '-')}">${item.limpezaPipa}</span>
                        <button onclick="editStatus('carretas', '${item.id}', 'limpezaPipa')" class="ml-2 text-xs text-blue-600 dark:text-blue-400 hover:underline">Editar</button>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                        <button onclick="viewDetails('carretas', '${item.id}')" class="text-blue-600 dark:text-blue-400 hover:underline mr-2">Ver detalhes</button>
                        <button onclick="deleteEquipment('carretas', '${item.id}')" class="text-red-600 dark:text-red-400 hover:underline">Excluir</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function renderEquipmentSection(category) {
            const grid = document.getElementById(category + 'Grid');
            grid.innerHTML = '';

            maintenanceData[category].forEach(item => {
                const card = document.createElement('div');
                card.className = `equipment-card ${category}-item`;
                card.setAttribute('data-status', item.status);

                let statusClass = `status-${item.status.toLowerCase().replace(' ', '-')}`;
                
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">${category.charAt(0).toUpperCase() + category.slice(1, -1)} ${item.id}</h3>
                        <span class="status-badge ${statusClass}">${item.status}</span>
                    </div>
                    ${item.local ? `<p class="text-sm text-gray-600 dark:text-gray-400 mb-2"><strong>Local:</strong> ${item.local}</p>` : ''}
                    ${item.placa ? `<p class="text-sm text-gray-600 dark:text-gray-400 mb-2"><strong>Placa:</strong> ${item.placa}</p>` : ''}
                    ${item.pendencias ? `<p class="text-sm text-gray-600 dark:text-gray-400 mb-3"><strong>Pendências:</strong> ${item.pendencias}</p>` : ''}
                    <div class="flex justify-end space-x-2">
                        <button onclick="editStatus('${category}', '${item.id}', 'status')" class="text-sm text-blue-600 dark:text-blue-400 hover:underline">
                            Editar Status
                        </button>
                        <button onclick="viewDetails('${category}', '${item.id}')" class="text-sm text-gray-500 dark:text-gray-400 hover:underline">
                            Detalhes
                        </button>
                        <button onclick="deleteEquipment('${category}', '${item.id}')" class="text-sm text-red-600 dark:text-red-400 hover:underline">
                            Excluir
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterItems(category, status) {
            // Update filter buttons
            const categoryElement = document.getElementById(category);
            const filterButtons = categoryElement.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                btn.classList.remove('bg-primary', 'text-white');
                btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            });
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            event.target.classList.add('bg-primary', 'text-white');

            // Filter items
            if (category === 'carretas') {
                const rows = document.querySelectorAll('.carreta-row');
                rows.forEach(row => {
                    if (status === 'all') {
                        row.style.display = '';
                    } else {
                        const secoStatus = row.getAttribute('data-status-seco');
                        const pipaStatus = row.getAttribute('data-status-pipa');
                        const shouldShow = secoStatus === status || pipaStatus === status;
                        row.style.display = shouldShow ? '' : 'none';
                    }
                });
            } else {
                const items = document.querySelectorAll(`.${category}-item`);
                items.forEach(item => {
                    if (status === 'all') {
                        item.style.display = '';
                    } else {
                        const itemStatus = item.getAttribute('data-status');
                        item.style.display = itemStatus === status ? '' : 'none';
                    }
                });
            }
        }

        function editStatus(category, itemId, field) {
            currentEditCategory = category;
            currentEditItem = itemId;
            currentEditField = field;

            document.getElementById('editEquipmentName').textContent = `${category.charAt(0).toUpperCase() + category.slice(1)} ${itemId}`;
            
            // Get current status
            const item = maintenanceData[category].find(i => i.id === itemId);
            let currentStatus = '';
            
            if (field === 'limpezaSeco') {
                currentStatus = item.limpezaSeco;
            } else if (field === 'limpezaPipa') {
                currentStatus = item.limpezaPipa;
            } else {
                currentStatus = item.status;
            }

            document.getElementById('editStatus').value = currentStatus;
            document.getElementById('editModal').classList.remove('hidden');
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
            currentEditItem = null;
            currentEditCategory = null;
            currentEditField = null;
        }

        function saveEdit() {
            if (!currentEditItem || !currentEditCategory || !currentEditField) return;

            const newStatus = document.getElementById('editStatus').value;
            const item = maintenanceData[currentEditCategory].find(i => i.id === currentEditItem);
            
            if (currentEditField === 'limpezaSeco') {
                item.limpezaSeco = newStatus;
            } else if (currentEditField === 'limpezaPipa') {
                item.limpezaPipa = newStatus;
            } else {
                item.status = newStatus;
            }

            // Re-render the affected section and dashboard
            if (currentEditCategory === 'carretas') {
                renderCarretas();
            } else {
                renderEquipmentSection(currentEditCategory);
            }
            renderDashboard();

            closeEditModal();
        }

        function viewDetails(category, itemId) {
            const item = maintenanceData[category].find(i => i.id === itemId);
            let details = `Equipamento: ${category.charAt(0).toUpperCase() + category.slice(1)} ${itemId}\n`;
            
            if (item.status) details += `Status: ${item.status}\n`;
            if (item.local) details += `Local: ${item.local}\n`;
            if (item.placa) details += `Placa: ${item.placa}\n`;
            if (item.pendencias) details += `Pendências: ${item.pendencias}\n`;
            if (item.limpezaSeco) details += `Limpeza Seco: ${item.limpezaSeco}\n`;
            if (item.limpezaPipa) details += `Limpeza Pipa: ${item.limpezaPipa}\n`;

            // Create custom modal instead of using alert()
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50';
            modal.innerHTML = `
                <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
                    <div class="mt-3">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Detalhes do Equipamento</h3>
                        <pre class="text-sm text-gray-600 dark:text-gray-400 whitespace-pre-wrap mb-4">${details}</pre>
                        <div class="flex justify-end">
                            <button onclick="this.closest('.fixed').remove()" class="px-4 py-2 bg-primary text-white hover:bg-primary/90 rounded">
                                Fechar
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Variables for new equipment addition
        let currentAddCategory = null;

        function addNewEquipment(category) {
            currentAddCategory = category;
            
            // Set category name
            const categoryNames = {
                'carretas': 'Carreta',
                'colhedoras': 'Colhedora', 
                'tratores': 'Trator',
                'transbordos': 'Transbordo',
                'caminhoes': 'Caminhão',
                'vivencias': 'Vivência',
                'reboques': 'Reboque Sojas'
            };
            
            document.getElementById('addEquipmentType').textContent = categoryNames[category];
            
            // Clear form
            document.getElementById('addEquipmentId').value = '';
            document.getElementById('addEquipmentPlaca').value = '';
            document.getElementById('addEquipmentLocal').value = '';
            document.getElementById('addEquipmentPendencias').value = '';
            document.getElementById('addEquipmentStatus').value = 'PENDENTE';
            
            // Show/hide fields based on category
            const placaField = document.getElementById('addPlacaField');
            const localField = document.getElementById('addLocalField');
            const pendenciasField = document.getElementById('addPendenciasField');
            
            if (category === 'caminhoes' || category === 'reboques') {
                placaField.style.display = 'block';
                localField.style.display = 'block';
                pendenciasField.style.display = 'block';
            } else if (category === 'carretas') {
                placaField.style.display = 'none';
                localField.style.display = 'none';
                pendenciasField.style.display = 'none';
            } else {
                placaField.style.display = 'none';
                localField.style.display = 'block';
                pendenciasField.style.display = 'block';
            }
            
            document.getElementById('addModal').classList.remove('hidden');
        }

        function closeAddModal() {
            document.getElementById('addModal').classList.add('hidden');
            currentAddCategory = null;
        }

        function saveNewEquipment() {
            if (!currentAddCategory) return;
            
            const id = document.getElementById('addEquipmentId').value.trim();
            if (!id) {
                showNotification('Por favor, digite um ID para o equipamento.', 'error');
                return;
            }
            
            // Check if ID already exists
            const existingItem = maintenanceData[currentAddCategory].find(item => item.id === id);
            if (existingItem) {
                showNotification('Este ID já existe nesta categoria.', 'error');
                return;
            }
            
            const newItem = { id: id };
            
            if (currentAddCategory === 'carretas') {
                newItem.limpezaSeco = document.getElementById('addEquipmentStatus').value;
                newItem.limpezaPipa = document.getElementById('addEquipmentStatus').value;
            } else {
                newItem.status = document.getElementById('addEquipmentStatus').value;
                newItem.local = document.getElementById('addEquipmentLocal').value.trim();
                newItem.pendencias = document.getElementById('addEquipmentPendencias').value.trim();
                
                if (currentAddCategory === 'caminhoes') {
                    newItem.placa = document.getElementById('addEquipmentPlaca').value.trim();
                }
            }
            
            // Add to data
            maintenanceData[currentAddCategory].push(newItem);
            
            // Re-render
            if (currentAddCategory === 'carretas') {
                renderCarretas();
            } else {
                renderEquipmentSection(currentAddCategory);
            }
            renderDashboard();
            
            showNotification('Equipamento adicionado com sucesso!', 'success');
            closeAddModal();
        }

        // Variables for deletion
        let currentDeleteCategory = null;
        let currentDeleteItem = null;

        function deleteEquipment(category, itemId) {
            currentDeleteCategory = category;
            currentDeleteItem = itemId;
            
            const categoryNames = {
                'carretas': 'Carreta',
                'colhedoras': 'Colhedora', 
                'tratores': 'Trator',
                'transbordos': 'Transbordo',
                'caminhoes': 'Caminhão',
                'vivencias': 'Vivência',
                'reboques': 'Reboque Sojas'
            };
            
            document.getElementById('deleteEquipmentName').textContent = `${categoryNames[category]} ${itemId}`;
            document.getElementById('deleteModal').classList.remove('hidden');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.add('hidden');
            currentDeleteCategory = null;
            currentDeleteItem = null;
        }

        function confirmDelete() {
            if (!currentDeleteCategory || !currentDeleteItem) return;
            
            // Find and remove item
            const index = maintenanceData[currentDeleteCategory].findIndex(item => item.id === currentDeleteItem);
            if (index !== -1) {
                maintenanceData[currentDeleteCategory].splice(index, 1);
                
                // Re-render
                if (currentDeleteCategory === 'carretas') {
                    renderCarretas();
                } else {
                    renderEquipmentSection(currentDeleteCategory);
                }
                renderDashboard();
                
                showNotification('Equipamento excluído com sucesso!', 'success');
            }
            
            closeDeleteModal();
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-md shadow-lg max-w-sm ${
                type === 'success' ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' :
                type === 'error' ? 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200' :
                'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'
            }`;
            
            notification.innerHTML = `
                <div class="flex justify-between items-center">
                    <p class="text-sm font-medium">${message}</p>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-gray-400 hover:text-gray-600">
                        <span class="sr-only">Fechar</span>
                        <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>
